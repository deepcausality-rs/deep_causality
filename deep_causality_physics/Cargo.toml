[package]
name = "deep_causality_physics"
version = "0.3.0"
edition = { workspace = true }
rust-version = { workspace = true }
license = { workspace = true }
repository = "https://github.com/deepcausality/deep_causality.rs"
authors = ["Marvin Hansen <marvin.hansen@gmail.com>"]
description = "Standard library of physics formulas and engineering primitives for DeepCausality."
documentation = "https://docs.rs/deep_causality"
categories = ["science", "simulation"]
keywords = ["physics", "causality", "simulation", "science"]
exclude = [
    "*.bazel",
    "*/*.bazel",
    "*.bazel.*",
    "BUILD",
    "BUILD.bazel",
    "MODULE.bazel",
    ".bazelignore",
    ".bazelrc",
    "tests/**/*",
]

[features]
default = ["std"]
std = ["alloc", "deep_causality_core/std", "deep_causality_num/std"]
alloc = []
# Enables random number generator from the host OS for secure random numbers.
# Enabling os-random adds an indirect depdency on getrandom and libc.
# Disabled by default to use native Rust prng instead.
# Also enables Lund string fragmentation for QCD hadronization.
os-random = ["deep_causality_rand/os-random"] # required for lund hadronization

# MLX acceleration for Apple Silicon (M Series).
# Forwards to deep_causality_tensor/mlx for GPU-accelerated operations.
# Note: Only builds on macOS aarch64. f64 downcast to f32 for GPU execution.
mlx = ["dep:mlx-rs", "deep_causality_tensor/mlx", "deep_causality_multivector/mlx"]
# CPU parallelism via rayon for multi-threaded tensor operations.
parallel = ["deep_causality_tensor/parallel"]
# Future: CUDA support
cuda = ["deep_causality_tensor/cuda"]

# MLX dependency - only available on macOS aarch64
[target.'cfg(all(target_os = "macos", target_arch = "aarch64"))'.dependencies]
mlx-rs = { version = "0.25.3", features = ["metal"], optional = true }

[dependencies.deep_causality_core]
path = "../deep_causality_core"
version = "0.0.2"

[dependencies.deep_causality_haft]
path = "../deep_causality_haft"
version = "0.2.7"

[dependencies.deep_causality_metric]
path = "../deep_causality_metric"
version = "0.1"

[dependencies.deep_causality_multivector]
path = "../deep_causality_multivector"
version = "0.3.0"

[dependencies.deep_causality_num]
path = "../deep_causality_num"
version = "0.1.11"

[dependencies.deep_causality_rand]
path = "../deep_causality_rand"
version = "0.1.8"
optional = true

[dependencies.deep_causality_sparse]
path = "../deep_causality_sparse"
version = "0.1"

[dependencies.deep_causality_tensor]
path = "../deep_causality_tensor"
version = "0.3.0"

[dependencies.deep_causality_topology]
path = "../deep_causality_topology"
version = "0.2.4"
